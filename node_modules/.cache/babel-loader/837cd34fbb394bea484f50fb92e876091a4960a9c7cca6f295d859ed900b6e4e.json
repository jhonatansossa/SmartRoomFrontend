{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adga2\\\\Desktop\\\\SmartRoom\\\\src\\\\screens\\\\AllSwitches.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { generatePath, useNavigate } from \"react-router-dom\";\nimport openHAB from \"../openHAB/openHAB\";\nimport Axios from \"axios\";\nimport ToggleButton from \"react-toggle-button\";\nimport ReactTooltip from \"react-tooltip\";\nimport { token } from \"./Login/Login\";\nimport base64 from 'base-64';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar regex = /\\bSensor\\b/;\nconst AllSwitches = () => {\n  _s();\n  let navigate = useNavigate();\n  const [openHABItems, setOpenHABItems] = useState([]);\n  const [toggle, setToggle] = useState(false); // Switch toggle handler\n  const [responseStatus, setResponseStatus] = useState([]);\n\n  //let base64 = require(\"base-64\");\n  const config = {\n    headers: {\n      Authorization: token\n    }\n  };\n  const postConfig = {\n    headers: {\n      Authorization: token,\n      \"Content-Type\": \"text/plain\"\n    }\n  };\n  useEffect(() => {\n    document.title = \"SmartRoom – All devices\";\n    let auth = sessionStorage.getItem(\"auth\");\n    if (auth !== \"true\") {\n      navigate(\"/login\");\n    } else {\n      fetchOpenHABItems();\n    }\n  }, []);\n  const fetchOpenHABItems = async () => {\n    const response = await Axios.get(openHAB.url + \"/api/v1/devices/items\", config);\n    setOpenHABItems(response.data);\n  };\n  var switches = [];\n  openHABItems.forEach(function (item) {\n    if (item.type === \"Switch\" && !regex.test(item.Name)) {\n      switches.push(item);\n    }\n  });\n  function redirectToDetailedSwitch(id) {\n    let path = generatePath(\"/switches/:id/details\", {\n      id\n    });\n    navigate(path);\n  }\n  async function toggleAllSwitches(toggle) {\n    switches.forEach(function (item) {\n      if (toggle === true) {\n        Axios.post(openHAB.url + \"/api/v1/devices/items/\" + item.name, \"OFF\", postConfig).then(response => {\n          setResponseStatus(response.data);\n          console.log(responseStatus);\n        });\n      } else {\n        Axios.post(openHAB.url + \"/api/v1/devices/items/\" + item.name, \"ON\", postConfig).then(response => {\n          setResponseStatus(response.data);\n          console.log(responseStatus);\n        });\n      }\n      fetchOpenHABItems();\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [switches.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"noDevicesPopup\",\n      children: \"No switches found. Make sure openHAB is running!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), switches.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card masterSwitch\",\n      children: [/*#__PURE__*/_jsxDEV(ToggleButton, {\n        id: \"masterToggle\",\n        value: toggle,\n        onToggle: () => {\n          setToggle(!toggle);\n          toggleAllSwitches(toggle);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"masterSwitchContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"masterSwitchDesc\",\n          children: \"Master-Switch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          id: \"masterHelpIcon\",\n          src: \"help.svg\",\n          alt: \"help\",\n          width: \"14px\",\n          height: \"14px\",\n          \"data-tip\": true,\n          \"data-for\": \"masterSwitch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n          id: \"masterSwitch\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Toggle all devices at once\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vertical-scroll-area\",\n      children: switches.map(src => /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [src.state === \"OFF\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"switchOFF\",\n          className: \"card hov-primary vertical\",\n          onClick: () => redirectToDetailedSwitch(src.name),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-image vertical\",\n            style: {\n              backgroundImage: `url('/resources/${src.name}.svg')`,\n              filter: \"invert(35%) sepia(24%) saturate(6006%) hue-rotate(349deg) brightness(84%) contrast(89%)\"\n            }\n          }, src.title, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-title vertical\",\n            style: {\n              color: \"#cc4125\"\n            },\n            children: src.label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 15\n        }, this), src.state === \"ON\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"switchON\",\n          className: \"card hov-primary vertical\",\n          onClick: () => redirectToDetailedSwitch(src.name),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-image vertical\",\n            style: {\n              backgroundImage: `url('/resources/${src.name}.svg')`,\n              filter: \"invert(56%) sepia(39%) saturate(532%) hue-rotate(57deg) brightness(98%) contrast(90%)\"\n            }\n          }, src.title, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-title vertical\",\n            style: {\n              color: \"#6aa84f\"\n            },\n            children: src.label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(AllSwitches, \"HL7wir2FsEZ+YxXRufdqpgIxVO8=\", false, function () {\n  return [useNavigate];\n});\n_c = AllSwitches;\nexport default AllSwitches;\nvar _c;\n$RefreshReg$(_c, \"AllSwitches\");","map":{"version":3,"names":["React","useEffect","useState","generatePath","useNavigate","openHAB","Axios","ToggleButton","ReactTooltip","token","base64","regex","AllSwitches","navigate","openHABItems","setOpenHABItems","toggle","setToggle","responseStatus","setResponseStatus","config","headers","Authorization","postConfig","document","title","auth","sessionStorage","getItem","fetchOpenHABItems","response","get","url","data","switches","forEach","item","type","test","Name","push","redirectToDetailedSwitch","id","path","toggleAllSwitches","post","name","then","console","log","length","map","src","state","backgroundImage","filter","color","label"],"sources":["C:/Users/adga2/Desktop/SmartRoom/src/screens/AllSwitches.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { generatePath, useNavigate } from \"react-router-dom\";\r\nimport openHAB from \"../openHAB/openHAB\";\r\nimport Axios from \"axios\";\r\nimport ToggleButton from \"react-toggle-button\";\r\nimport ReactTooltip from \"react-tooltip\";\r\nimport { token } from \"./Login/Login\";\r\nimport base64 from 'base-64';\r\n\r\nvar regex = /\\bSensor\\b/;\r\nconst AllSwitches = () => {\r\n  let navigate = useNavigate();\r\n\r\n  const [openHABItems, setOpenHABItems] = useState([]);\r\n  const [toggle, setToggle] = useState(false); // Switch toggle handler\r\n  const [responseStatus, setResponseStatus] = useState([]);\r\n\r\n  //let base64 = require(\"base-64\");\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  };\r\n\r\n  const postConfig = {\r\n    headers: {\r\n      Authorization: token,\r\n      \"Content-Type\": \"text/plain\",\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.title = \"SmartRoom – All devices\";\r\n    let auth = sessionStorage.getItem(\"auth\");\r\n    if (auth !== \"true\") {\r\n      navigate(\"/login\");\r\n    } else {\r\n      fetchOpenHABItems();\r\n    }\r\n  }, []);\r\n\r\n  const fetchOpenHABItems = async () => {\r\n    const response = await Axios.get(openHAB.url + \"/api/v1/devices/items\", config);\r\n    setOpenHABItems(response.data);\r\n  };\r\n\r\n  var switches = [];\r\n  openHABItems.forEach(function (item) {\r\n    if (item.type === \"Switch\" && !regex.test(item.Name)) {\r\n            switches.push(item);\r\n          }\r\n        }\r\n  );\r\n\r\n  function redirectToDetailedSwitch(id) {\r\n    let path = generatePath(\"/switches/:id/details\", { id });\r\n    navigate(path);\r\n  }\r\n\r\n  async function toggleAllSwitches(toggle) {\r\n    switches.forEach(function (item) {\r\n      if (toggle === true) {\r\n        Axios\r\n          .post(openHAB.url + \"/api/v1/devices/items/\" + item.name, \"OFF\", postConfig)\r\n          .then((response) => {\r\n            setResponseStatus(response.data);\r\n            console.log(responseStatus);\r\n          });\r\n      } else {\r\n        Axios\r\n          .post(openHAB.url + \"/api/v1/devices/items/\" + item.name, \"ON\", postConfig)\r\n          .then((response) => {\r\n            setResponseStatus(response.data);\r\n            console.log(responseStatus);\r\n          });\r\n      }\r\n      fetchOpenHABItems();\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {switches.length === 0 && (\r\n        <div className=\"noDevicesPopup\">\r\n          No switches found. Make sure openHAB is running!\r\n        </div>\r\n      )}\r\n      {switches.length > 0 && (\r\n        <div className=\"card masterSwitch\">\r\n          <ToggleButton\r\n            id=\"masterToggle\"\r\n            value={toggle}\r\n            onToggle={() => {\r\n              setToggle(!toggle);\r\n              toggleAllSwitches(toggle);\r\n            }}\r\n          />\r\n          <div className=\"masterSwitchContainer\">\r\n            <div id=\"masterSwitchDesc\">Master-Switch</div>\r\n            <img\r\n              id=\"masterHelpIcon\"\r\n              src=\"help.svg\"\r\n              alt=\"help\"\r\n              width=\"14px\"\r\n              height=\"14px\"\r\n              data-tip\r\n              data-for=\"masterSwitch\"\r\n            />\r\n            <ReactTooltip id=\"masterSwitch\">\r\n              <span>Toggle all devices at once</span>\r\n            </ReactTooltip>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"vertical-scroll-area\">\r\n        {switches.map((src) => (\r\n          <>\r\n            {src.state === \"OFF\" && (\r\n              <button\r\n                id=\"switchOFF\"\r\n                className=\"card hov-primary vertical\"\r\n                onClick={() => redirectToDetailedSwitch(src.name)}\r\n              >\r\n                {\r\n                  <div\r\n                    key={src.title}\r\n                    className=\"card-image vertical\"\r\n                    style={{\r\n                      backgroundImage: `url('/resources/${src.name}.svg')`,\r\n                      filter:\r\n                        \"invert(35%) sepia(24%) saturate(6006%) hue-rotate(349deg) brightness(84%) contrast(89%)\",\r\n                    }}\r\n                  />\r\n                }\r\n                <div\r\n                  className=\"card-title vertical\"\r\n                  style={{\r\n                    color: \"#cc4125\",\r\n                  }}\r\n                >\r\n                  {src.label}\r\n                </div>\r\n              </button>\r\n            )}\r\n            {src.state === \"ON\" && (\r\n              <button\r\n                id=\"switchON\"\r\n                className=\"card hov-primary vertical\"\r\n                onClick={() => redirectToDetailedSwitch(src.name)}\r\n              >\r\n                {\r\n                  <div\r\n                    key={src.title}\r\n                    className=\"card-image vertical\"\r\n                    style={{\r\n                      backgroundImage: `url('/resources/${src.name}.svg')`,\r\n                      filter:\r\n                        \"invert(56%) sepia(39%) saturate(532%) hue-rotate(57deg) brightness(98%) contrast(90%)\",\r\n                    }}\r\n                  />\r\n                }\r\n                <div\r\n                  className=\"card-title vertical\"\r\n                  style={{\r\n                    color: \"#6aa84f\",\r\n                  }}\r\n                >\r\n                  {src.label}\r\n                </div>\r\n              </button>\r\n            )}\r\n          </>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AllSwitches;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,YAAY,EAAEC,WAAW,QAAQ,kBAAkB;AAC5D,OAAOC,OAAO,MAAM,oBAAoB;AACxC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,qBAAqB;AAC9C,OAAOC,YAAY,MAAM,eAAe;AACxC,SAASC,KAAK,QAAQ,eAAe;AACrC,OAAOC,MAAM,MAAM,SAAS;AAAC;AAAA;AAE7B,IAAIC,KAAK,GAAG,YAAY;AACxB,MAAMC,WAAW,GAAG,MAAM;EAAA;EACxB,IAAIC,QAAQ,GAAGT,WAAW,EAAE;EAE5B,MAAM,CAACU,YAAY,EAAEC,eAAe,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACc,MAAM,EAAEC,SAAS,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EAC7C,MAAM,CAACgB,cAAc,EAAEC,iBAAiB,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;;EAExD;EACA,MAAMkB,MAAM,GAAG;IACbC,OAAO,EAAE;MAAEC,aAAa,EAAEb;IAAM;EAClC,CAAC;EAED,MAAMc,UAAU,GAAG;IACjBF,OAAO,EAAE;MACPC,aAAa,EAAEb,KAAK;MACpB,cAAc,EAAE;IAClB;EACF,CAAC;EAEDR,SAAS,CAAC,MAAM;IACduB,QAAQ,CAACC,KAAK,GAAG,yBAAyB;IAC1C,IAAIC,IAAI,GAAGC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC;IACzC,IAAIF,IAAI,KAAK,MAAM,EAAE;MACnBb,QAAQ,CAAC,QAAQ,CAAC;IACpB,CAAC,MAAM;MACLgB,iBAAiB,EAAE;IACrB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMA,iBAAiB,GAAG,YAAY;IACpC,MAAMC,QAAQ,GAAG,MAAMxB,KAAK,CAACyB,GAAG,CAAC1B,OAAO,CAAC2B,GAAG,GAAG,uBAAuB,EAAEZ,MAAM,CAAC;IAC/EL,eAAe,CAACe,QAAQ,CAACG,IAAI,CAAC;EAChC,CAAC;EAED,IAAIC,QAAQ,GAAG,EAAE;EACjBpB,YAAY,CAACqB,OAAO,CAAC,UAAUC,IAAI,EAAE;IACnC,IAAIA,IAAI,CAACC,IAAI,KAAK,QAAQ,IAAI,CAAC1B,KAAK,CAAC2B,IAAI,CAACF,IAAI,CAACG,IAAI,CAAC,EAAE;MAC9CL,QAAQ,CAACM,IAAI,CAACJ,IAAI,CAAC;IACrB;EACF,CAAC,CACN;EAED,SAASK,wBAAwB,CAACC,EAAE,EAAE;IACpC,IAAIC,IAAI,GAAGxC,YAAY,CAAC,uBAAuB,EAAE;MAAEuC;IAAG,CAAC,CAAC;IACxD7B,QAAQ,CAAC8B,IAAI,CAAC;EAChB;EAEA,eAAeC,iBAAiB,CAAC5B,MAAM,EAAE;IACvCkB,QAAQ,CAACC,OAAO,CAAC,UAAUC,IAAI,EAAE;MAC/B,IAAIpB,MAAM,KAAK,IAAI,EAAE;QACnBV,KAAK,CACFuC,IAAI,CAACxC,OAAO,CAAC2B,GAAG,GAAG,wBAAwB,GAAGI,IAAI,CAACU,IAAI,EAAE,KAAK,EAAEvB,UAAU,CAAC,CAC3EwB,IAAI,CAAEjB,QAAQ,IAAK;UAClBX,iBAAiB,CAACW,QAAQ,CAACG,IAAI,CAAC;UAChCe,OAAO,CAACC,GAAG,CAAC/B,cAAc,CAAC;QAC7B,CAAC,CAAC;MACN,CAAC,MAAM;QACLZ,KAAK,CACFuC,IAAI,CAACxC,OAAO,CAAC2B,GAAG,GAAG,wBAAwB,GAAGI,IAAI,CAACU,IAAI,EAAE,IAAI,EAAEvB,UAAU,CAAC,CAC1EwB,IAAI,CAAEjB,QAAQ,IAAK;UAClBX,iBAAiB,CAACW,QAAQ,CAACG,IAAI,CAAC;UAChCe,OAAO,CAACC,GAAG,CAAC/B,cAAc,CAAC;QAC7B,CAAC,CAAC;MACN;MACAW,iBAAiB,EAAE;IACrB,CAAC,CAAC;EACJ;EAEA,oBACE;IAAA,WACGK,QAAQ,CAACgB,MAAM,KAAK,CAAC,iBACpB;MAAK,SAAS,EAAC,gBAAgB;MAAA,UAAC;IAEhC;MAAA;MAAA;MAAA;IAAA,QACD,EACAhB,QAAQ,CAACgB,MAAM,GAAG,CAAC,iBAClB;MAAK,SAAS,EAAC,mBAAmB;MAAA,wBAChC,QAAC,YAAY;QACX,EAAE,EAAC,cAAc;QACjB,KAAK,EAAElC,MAAO;QACd,QAAQ,EAAE,MAAM;UACdC,SAAS,CAAC,CAACD,MAAM,CAAC;UAClB4B,iBAAiB,CAAC5B,MAAM,CAAC;QAC3B;MAAE;QAAA;QAAA;QAAA;MAAA,QACF,eACF;QAAK,SAAS,EAAC,uBAAuB;QAAA,wBACpC;UAAK,EAAE,EAAC,kBAAkB;UAAA,UAAC;QAAa;UAAA;UAAA;UAAA;QAAA,QAAM,eAC9C;UACE,EAAE,EAAC,gBAAgB;UACnB,GAAG,EAAC,UAAU;UACd,GAAG,EAAC,MAAM;UACV,KAAK,EAAC,MAAM;UACZ,MAAM,EAAC,MAAM;UACb,gBAAQ;UACR,YAAS;QAAc;UAAA;UAAA;UAAA;QAAA,QACvB,eACF,QAAC,YAAY;UAAC,EAAE,EAAC,cAAc;UAAA,uBAC7B;YAAA,UAAM;UAA0B;YAAA;YAAA;YAAA;UAAA;QAAO;UAAA;UAAA;UAAA;QAAA,QAC1B;MAAA;QAAA;QAAA;QAAA;MAAA,QACX;IAAA;MAAA;MAAA;MAAA;IAAA,QAET,eACD;MAAK,SAAS,EAAC,sBAAsB;MAAA,UAClCkB,QAAQ,CAACiB,GAAG,CAAEC,GAAG,iBAChB;QAAA,WACGA,GAAG,CAACC,KAAK,KAAK,KAAK,iBAClB;UACE,EAAE,EAAC,WAAW;UACd,SAAS,EAAC,2BAA2B;UACrC,OAAO,EAAE,MAAMZ,wBAAwB,CAACW,GAAG,CAACN,IAAI,CAAE;UAAA,wBAGhD;YAEE,SAAS,EAAC,qBAAqB;YAC/B,KAAK,EAAE;cACLQ,eAAe,EAAG,mBAAkBF,GAAG,CAACN,IAAK,QAAO;cACpDS,MAAM,EACJ;YACJ;UAAE,GANGH,GAAG,CAAC3B,KAAK;YAAA;YAAA;YAAA;UAAA,QAOd,eAEJ;YACE,SAAS,EAAC,qBAAqB;YAC/B,KAAK,EAAE;cACL+B,KAAK,EAAE;YACT,CAAE;YAAA,UAEDJ,GAAG,CAACK;UAAK;YAAA;YAAA;YAAA;UAAA,QACN;QAAA;UAAA;UAAA;UAAA;QAAA,QAET,EACAL,GAAG,CAACC,KAAK,KAAK,IAAI,iBACjB;UACE,EAAE,EAAC,UAAU;UACb,SAAS,EAAC,2BAA2B;UACrC,OAAO,EAAE,MAAMZ,wBAAwB,CAACW,GAAG,CAACN,IAAI,CAAE;UAAA,wBAGhD;YAEE,SAAS,EAAC,qBAAqB;YAC/B,KAAK,EAAE;cACLQ,eAAe,EAAG,mBAAkBF,GAAG,CAACN,IAAK,QAAO;cACpDS,MAAM,EACJ;YACJ;UAAE,GANGH,GAAG,CAAC3B,KAAK;YAAA;YAAA;YAAA;UAAA,QAOd,eAEJ;YACE,SAAS,EAAC,qBAAqB;YAC/B,KAAK,EAAE;cACL+B,KAAK,EAAE;YACT,CAAE;YAAA,UAEDJ,GAAG,CAACK;UAAK;YAAA;YAAA;YAAA;UAAA,QACN;QAAA;UAAA;UAAA;UAAA;QAAA,QAET;MAAA,gBAEJ;IAAC;MAAA;MAAA;MAAA;IAAA,QACE;EAAA,gBACL;AAEP,CAAC;AAAC,GApKI7C,WAAW;EAAA,QACAR,WAAW;AAAA;AAAA,KADtBQ,WAAW;AAsKjB,eAAeA,WAAW;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}